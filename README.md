# digital-customer-engagement-on-aws
Guidance for digital customer engagement on AWS

## Content

### 1-DemoSource/JavaScriptSource/retail-demo-store

A demo web retail store for demo purpose with RudderStack JavaScript SDK integrated.

Modify environment variables and set RudderStack Data Plane URL and Source Write Key
```
cd 1-DemoSource/JavaScriptSource/retail-demo-store
cp .env.template .env
```

### 2-DataCollection/FirehoseDestination

A Cloud Formation template for createing a Amazon Kinesis Firehose Delivery Stream to be used as RudderStack destination.


### 3-DataUnify/RedshiftTransformation

An Airflow DAG and A DBT Project for running data unify process against the Redshift Destination generated tables in Amazon Redshift.

Please note the DBT models are only for demo purpose now. Those models are not well tested and the model definition could be changed without notice later.

Airflow will be run in Amazon EC2.

With Docker and Docker Compose installed EC2, modify docker-compose.yaml to config DBT_DW_* environment variables.

Install DBT CLI and run `dbt deps` under transform/rudder-ecommerce folder, and then dbt dependencies will be installed.

Start Airflow Service by executing `docker-compose up -d` command in the RedshiftTransformation folder.

Access the Airflow Web UI in http://localhost:8080

### 3-DataUnify/AthenaTransformation

A sample jupyter notebook to run SQL query in Amazon Athena to process raw events data in S3. The Raw Events data is generated by Amazon Kinesis Firehose Destination.

Start notebook
```
pip install -r requirements.txt

export AWS_ACCESS_KEY_ID=<your AK>
export AWS_SECRET_ACCESS_KEY=<your SK>
jupyter notebook
```

### 9-Tools/JSSourceDataGenerator

A python script to send requests directly to RudderStack Data Plane with mock data.